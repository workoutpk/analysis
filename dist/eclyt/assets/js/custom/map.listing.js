"use strict";var map,MapConfig=MapConfig||{},listing=[],markerList=[],Google=new GoogleMap,mapBox=new InfoBox,openInfoBox="open-infobox",$listingCard=$("#listing_data .listing-card");function Marker(e,i,a,t){this.latlng=e,this.markerObj=a,this.markerIcon=t,this.setMap(i)}$((function(){MapConfig={init:function(){MapConfig.generateListing(),MapConfig.addCustomMarker(),MapConfig.cardHoverIndicateMarker(),MapConfig.markerGrouping(),Google.customZoomControl(map)},
/*!
         * Getting listing data form HTML page.
         * Generate list to bind in data in map
         *---------------------------------------------------*/
generateListing:function(){map=PageConfig.getMap(),$listingCard.each((function(){var e=$(this),i=parseFloat(e.data("lat-lng").split(",")[0]),a=parseFloat(e.data("lat-lng").split(",")[1]),t={image:e.find(".listing-image img").attr("src"),title:e.find(".listing-title").text(),url:e.find(".listing-title").attr("href"),description:e.find(".listing-desc p").text(),rating:e.find(".listing-rating .listing-rating-number").text(),starIcon:'<i class="ion-md-star"></i>',latLng:{lat:i,lng:a},markerIcon:e.data("marker-icon")};t.html=function(e){return'<div class="listing-map-container"><a href="javascript:void(0);" class="infoBox-close"><i class="ion-ios-close-circle"></i></a><a href="'+e.url+'" class="listing-map-image"><img src="'+e.image+'" alt="'+e.title+'"></a><div class="listing-content"><div class="listing-content-head"><div class="listing-rating"><span class="listing-rating-number">'+e.rating+"</span>"+e.starIcon+'</div><div class="listing-desc"><a href="'+e.url+'" class="listing-title text-truncate">'+e.title+"</a><p>"+e.description+"</p></div></div></div></div>"}(t),listing.push(t)}))},
/*!
         * Add custom marker in map.
         *---------------------------------------------------*/
addCustomMarker:function(){var e=document.createElement("div");e.className="map-box";for(var i={content:e,disableAutoPan:!1,alignBottom:!0,maxWidth:0,pixelOffset:new google.maps.Size(-122,-25),zIndex:null,boxStyle:{width:"280px"},closeBoxMargin:"0",closeBoxURL:"",infoBoxClearance:new google.maps.Size(25,25),isHidden:!1,pane:"floatPane",enableEventPropagation:!1},a=0;a<listing.length;a++){var t=new Marker(new google.maps.LatLng(listing[a].latLng),map,{marker:a},listing[a].markerIcon);markerList.push(t),google.maps.event.addDomListener(t,"click",function(a,t){return function(n){mapBox.setOptions(i),e.innerHTML=listing[t].html,e.className="show",mapBox.close(),mapBox.open(map,a),t+1,google.maps.event.addListener(mapBox,"domready",(function(){$(".infoBox-close").click((function(e){e.preventDefault(),mapBox.close(),$(".map-marker").removeClass(openInfoBox)}))}))}}(t,a))}},
/*!
         * On hover of a list card linked the marker.
         * Show animation on marker
         *---------------------------------------------------*/
cardHoverIndicateMarker:function(){var e="hover-infobox";$listingCard.on("mouseover",(function(){var i=$(this),a=i.data("marker-id");if(void 0!==a){var t=markerList[a-1].div;$(t).addClass(e),i.on("mouseout",(function(){$(t).removeClass(e)}))}}))},
/*!
         * Cluster the marker group and showing calculation
         * of marker
         *---------------------------------------------------*/
markerGrouping:function(){new MarkerClusterer(map,markerList,{imagePath:"images/",styles:[{url:"",height:36,width:36}],minClusterSize:2});google.maps.event.addDomListener(window,"resize",(function(){var e=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(e)}))}},$(document).ready(MapConfig.init)})),Marker.prototype=new google.maps.OverlayView,Marker.prototype.draw=function(){var e=this,i=this.div;i||((i=this.div=document.createElement("div")).className="map-marker",i.innerHTML='<div class="marker-container"><div class="marker-icon"><i class="'+this.markerIcon+'"></i></div><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="36px" height="48px" viewBox="0 0 36 48" enable-background="new 0 0 36 48" xml:space="preserve"><path fill="#eb354e" d="M18,0C8.076,0,0,8.132,0,18.13C0,32.336,17.306,47.384,18,48c0.694-0.618,18-15.664,18-29.87C36,8.132,27.924,0,18,0z M18,28c-5.514,0-10-4.486-10-10S12.486,8,18,8c5.514,0,10,4.486,10,10S23.514,28,18,28z"/><circle class="marker-circle" cx="18" cy="18" r="15"/></svg></div><div class="marker-shadow"></div>',google.maps.event.addDomListener(i,"click",(function(i){$(".map-marker").removeClass(openInfoBox),google.maps.event.trigger(e,"click"),$(this).addClass(openInfoBox)})),void 0!==e.markerObj.marker&&(i.dataset.marker=e.markerObj.marker),this.getPanes().overlayImage.appendChild(i));var a=this.getProjection().fromLatLngToDivPixel(this.latlng);a&&(i.style.left=a.x+"px",i.style.top=a.y+"px")},Marker.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null,$(this).removeClass(openInfoBox))},Marker.prototype.getPosition=function(){return this.latlng};
//# sourceMappingURL=map.listing.js.map
